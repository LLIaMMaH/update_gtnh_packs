# Скрипт обновления GTNH ServerPacks и MultiMC

Этот скрипт автоматизирует загрузку серверных сборок и клиентских пакетов для модификации Minecraft GregTech New Horizons (GTNH) и размещает их в указанных директориях.

## Зависимости

Скрипт требует установки следующих пакетов:  
- `curl` - для загрузки списка файлов  
- `aria2` - для многопоточной загрузки  
- `coreutils` (стандартные утилиты) - для работы скрипта  

### Установка зависимостей
```bash
# Ubuntu/Debian:
sudo apt update
sudo apt install -y curl aria2

# CentOS/RHEL:
sudo yum install -y curl aria2

# Arch Linux:
sudo pacman -S curl aria2

# Fedora:
sudo dnf install -y curl aria2
```

## Назначение

Скрипт выполняет:  
- Загрузку ServerPacks (серверных сборок GTNH)  
- Загрузку MultiMC пакетов (клиентских сборок GTNH)  
- Проверку свободного места на диске перед загрузкой  
- Логирование всех операций  

Файлы сохраняются в папки Nextcloud, делая их доступными через веб-интерфейс.  

## Конфигурация

Основные настройки (можно изменить в начале скрипта):  

`LOG_FILE` - путь к файлу логов  
`MIN_SPACE_GB` - минимальный требуемый свободный объем (в GB)  
`SERVER_PACKS_DIR` - директория для серверных сборок  
`MULTI_MC_DIR` - директория для клиентских сборок  
`URL-адреса` для загрузки  

## Установка в cron

Для автоматического выполнения скрипта ежедневно в 5:00 утра:  

Откройте crontab для пользователя `www-data`:  
```bash
sudo crontab -u www-data -e
```
Добавьте строку:
```cron
0 5 * * * /путь/к/скрипту/update_gtnh_packs.sh
```

Убедитесь, что:  
- Скрипт имеет права на выполнение (chmod +x update_gtnh_packs.sh)  
- Пользователь www-data имеет права на запись в целевые директории  
- Установлены все зависимости  

## Настройка путей

Если нужно изменить:  
- Пользователя `cron` - замените `www-data` в команде `crontab`  
- Директории хранения - отредактируйте переменные `*_DIR` в скрипте  
- URL-адреса - измените переменные `*_URL` в скрипте  

## Логирование

Все действия записываются в файл, указанный в `LOG_FILE` (по умолчанию `/var/log/gtnh_update.log`).

## Ручной запуск

Для тестирования выполните:
```bash
sudo -u www-data /путь/к/скрипту/update_gtnh_packs.sh
```
